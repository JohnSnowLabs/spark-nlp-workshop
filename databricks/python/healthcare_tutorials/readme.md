# **Spark-NLP for Healthcare**

## Table of Contents  

### ➤ All in One Notebook

[SparkNLP_for_Healthcare_3h_Notebook.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/SparkNLP_for_Healthcare_3h_Notebook.ipynb)

[1.Detect_clinical_entities_relations_and_assertion_status_with_pretrained_pipelines.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/1.%20Detect%20clinical%20entities,%20relations%20and%20assertion%20status%20with%20pretrained%20pipelines.ipynb)


### ➤ Clinical Named Entity Recognition

[2.Training_and_Reusing_Clinical_Named_Entity_Recognition_Models.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/2.%20Training%20and%20Reusing%20Clinical%20Named%20Entity%20Recognition%20Models.ipynb)

[8.ZeroShot_Clinical_NER.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/8.ZeroShot_Clinical_NER.ipynb)

[10.Named_Entity_Recognition_using_rules.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/10.%20Named%20Entity%20Recognition%20using%20rules.ipynb)

### ➤ Clinical Assertion

[5.Training_and_Reusing_Assertion_Status_Models.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/5.%20Training%20and%20Reusing%20Assertion%20Status%20Models.ipynb)


### ➤ Clinical Relation Extraction

[4.Clinical_Relation_Extraction.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/4.%20Training%20and%20Reusing%20Clinical%20Relation%20Extraction%20Models.ipynb)

[11.ZeroShot_Clinical_Relation_Extraction.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/11.ZeroShot_Clinical_Relation_Extraction.ipynb)

### ➤ Clinical De-identification

[6.Clinical_DeIdentification.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/6.%20Clinical%20Deidentification%20Models.ipynb)

### ➤ Clinical Entity Resolution

[7.Clinical_Entity_Resolvers.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/7.%20Clinical%20Entity%20Coding%20with%20Pretrained%20Resolver%20Models.ipynb)

[23.Chunk_Mapping.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/23.Chunk_Mapping.ipynb)

### ➤ Large Language Modeling

[24.Medical_Text_Summarization.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/24.Medical_Text_Summarization.ipynb)

[31.Medical_Question_Answering.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/31.Medical_Question_Answering.ipynb)

[37.Text2SQL_Generation.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/37.Text2SQL_Generation.ipynb)

### ➤ Clinical Classifiers

[3.Training_a_Text_Classification_Model.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/3.%20Training%20a%20Text%20Classification%20Model.ipynb)

[14.Advanced_Sentence_Detection_using_Pretrained_Classification_Model.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/14.%20Advanced%20Sentence%20Detection%20using%20Pretrained%20Classification%20Model.ipynb)

[21.MedicalBertForSequenceClassification_in_SparkNLP.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/21.MedicalBertForSequenceClassification_in_SparkNLP.ipynb)

### ➤ Topic Based Notebooks

[3.1.Calculate_Medicare_Risk_Adjustment_Score.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/3.1.Calculate_Medicare_Risk_Adjustment_Score.ipynb)

[22.Oncology_Models.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/22.%20Oncology%20Models.ipynb)

[9.Adverse_Drug_Events_Detection_using_Named_Entity_Recognition_Classification_and_Assertion_Status_Models.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/9.%20Adverse%20Drug%20Events%20Detection%20using%20Named%20Entity%20Recognition,%20Classification%20and%20Assertion%20Status%20Models.ipynb)

[35.Voice_of_Patient_Models.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/35.Voice_of_Patient_Models.ipynb)

[36.Social_Determinant_of_Health_Models.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/36.Social_Determinant_of_Health_Models.ipynb)

### ➤ Auxillary Notebooks

[12.Context_Based_Clinical_Spell_Checker.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/12.%20Context%20Based%20Clinical%20Spell%20Checker.ipynb)

[13.Merging_Annotations_From_Multiple_Named_Entity_Recognition_Models.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare_tutorials/13.%20Merging%20Annotations%20From%20Multiple%20Named%20Entity%20Recognition%20Models.ipynb)

## ☞ Biomedical & Clinical NER Models Benchmarks/ Rankings

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-anatem)](https://paperswithcode.com/sota/named-entity-recognition-on-anatem?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-bc2gm)](https://paperswithcode.com/sota/named-entity-recognition-on-bc2gm?p=biomedical-named-entity-recognition-at-scale)
 
[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-bc4chemd)](https://paperswithcode.com/sota/named-entity-recognition-on-bc4chemd?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-bionlp13-cg)](https://paperswithcode.com/sota/named-entity-recognition-on-bionlp13-cg?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-linnaeus)](https://paperswithcode.com/sota/named-entity-recognition-on-linnaeus?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-species800)](https://paperswithcode.com/sota/named-entity-recognition-on-species800?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-ner-on-jnlpba)](https://paperswithcode.com/sota/named-entity-recognition-ner-on-jnlpba?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-ner-on-ncbi-disease)](https://paperswithcode.com/sota/named-entity-recognition-ner-on-ncbi-disease?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-linnaeus)](https://paperswithcode.com/sota/named-entity-recognition-on-linnaeus?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-ner-on-ncbi-disease)](https://paperswithcode.com/sota/named-entity-recognition-ner-on-ncbi-disease?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-bc5cdr-chemical)](https://paperswithcode.com/sota/named-entity-recognition-on-bc5cdr-chemical?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-ner-on-bc5cdr)](https://paperswithcode.com/sota/named-entity-recognition-ner-on-bc5cdr?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/improving-clinical-document-understanding-on/clinical-assertion-status-detection-on-2010)](https://paperswithcode.com/sota/clinical-assertion-status-detection-on-2010?p=improving-clinical-document-understanding-on)

Databricks Spark NLP Healthcare notebooks have been updated to latest release v5.1.0 (25.09.2023)

## Automatic deployment of John Snow Labs NLP on Databricks

Before running these notebooks in your Databricks cluster, please make sure that you setup your cluster according to instructions here:

1. In order to get trial keys for Spark NLP for Healthcare, fill in the form available at https://www.johnsnowlabs.com/databricks/ using your company e-mail and your databricks instance details. 

2. You will receive an e-mail for validating the provided e-mail address. Please click on the validation button. 

3. If you have a *Community Edition* Databricks instance, you will get a second email in a few minutes with a deployment script. Upload the script to your databricks workspace, attach it to a running cluster and run it for a frictionless installation of John Snow Labs NLP libraries. The deployment script will also install the TRIAL license key on your cluster. 

4. If you have an *Standard* or above Databricks subscriptions, John Snow Labs NLP libraries will be installed automatically on the cluster of your choice. 

You are ready to go!


## Manual deployment of John Snow Labs NLP on Databricks

1. In order to get trial keys for Spark NLP for Healthcare
, fill the form at https://www.johnsnowlabs.com/spark-nlp-try-free/ and you will get your keys to your email in a few minutes.

2. On a new cluster or existing one

  - add the following to the `Advanced Options -> Spark` tab, in `Spark.Config` box:

    ```bash
    spark.local.dir /var
    spark.kryoserializer.buffer.max 1000M
    spark.serializer org.apache.spark.serializer.KryoSerializer
    spark.driver.extraJavaOptions -Dspark.jsl.settings.pretrained.credentials.secret_access_key=xxx -Dspark.jsl.settings.pretrained.credentials.access_key_id=yyy

    ```
  - add the following to the `Advanced Options -> Spark` tab, in `Environment Variables` box:

    ```bash
    SPARK_NLP_LICENSE=zzz
    ```

3. Download the followings with AWS CLI to your local computer

    `$ aws s3 cp --region us-east-2 s3://pypi.johnsnowlabs.com/$jsl_secret/spark-nlp-jsl-3.0.2.jar spark-nlp-jsl-3.0.2.jar`

    `$ aws s3 cp --region us-east-2 s3://pypi.johnsnowlabs.com/$jsl_secret/spark-nlp-jsl/spark_nlp_jsl-3.0.2-py3-none-any.whl spark_nlp_jsl-3.0.2-py3-none-any.whl`

4. In `Libraries` tab inside your cluster:

 - Install New -> PyPI -> `spark-nlp==3.0.2` -> Install
 - Install New -> Maven -> Coordinates -> `com.johnsnowlabs.nlp:spark-nlp_2.12:3.0.2` -> Install

 - add following jars for the Healthcare library that you downloaded above:
        - Install New -> Python Whl -> upload `spark_nlp_jsl-3.0.2-py3-none-any.whl`

        - Install New -> Jar -> upload `spark-nlp-jsl-3.0.2.jar`

5. Now you can attach your notebook to the cluster and use Spark NLP!

For more information, see

  https://nlp.johnsnowlabs.com/docs/en/install#databricks-support

  https://nlp.johnsnowlabs.com/docs/en/licensed_install#install-spark-nlp-for-healthcare-on-databricks

The following notebooks are prepared and tested on **r2.2xlarge at 8.0 (includes Apache Spark 3.1.1, Scala 2.12)** on Databricks