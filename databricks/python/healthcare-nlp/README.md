###  <span style="color:red">Warning: </span> **The notebooks in this folder are only compatible with the library versions within the corresponding notebook**

# **Spark-NLP for Healthcare**

## Table of Contents  

### ➤ All in One Notebook

[00.Get_Started_Spark_NLP_for_Healthcare.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/00.Get_Started_Spark_NLP_for_Healthcare.ipynb)

[07.0.Pretrained_Clinical_Pipelines.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/07.0.Pretrained_Clinical_Pipelines.ipynb)


### ➤ Clinical Named Entity Recognition

[01.0.Clinical_Named_Entity_Recognition_Model.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/01.0.Clinical_Named_Entity_Recognition_Model.ipynb)

[01.4.ZeroShot_Clinical_NER.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/01.4.ZeroShot_Clinical_NER.ipynb)

[09.0.Contextual_Parser_Rule_Based_NER.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/09.0.Contextual_Parser_Rule_Based_NER.ipynb)

### ➤ Clinical Assertion

[02.0.Clinical_Assertion_Model.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/02.0.Clinical_Assertion_Model.ipynb)


### ➤ Clinical Relation Extraction

[03.0.Clinical_Relation_Extraction.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/03.0.Clinical_Relation_Extraction.ipynb)

[03.3.ZeroShot_Clinical_Relation_Extraction.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/03.3.ZeroShot_Clinical_Relation_Extraction.ipynb)

### ➤ Clinical De-identification

[04.0.Clinical_DeIdentification.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/04.0.Clinical_DeIdentification.ipynb)

### ➤ Clinical Entity Resolution

[05.0.Clinical_Entity_Resolvers.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/05.0.Clinical_Entity_Resolvers.ipynb)

[06.0.Chunk_Mapping.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/06.0.Chunk_Mapping.ipynb)

### ➤ Large Language Modeling

[23.0.Medical_Question_Answering.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/23.0.Medical_Question_Answering.ipynb)

[24.0.Medical_Text_Summarization.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/24.0.Medical_Text_Summarization.ipynb)

[29.0.Text2SQL_Generation.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/29.0.Text2SQL_Generation.ipynb)

### ➤ Clinical Classifiers

[08.2.Generic_Classifier.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/08.2.Generic_Classifier.ipynb)

[11.0.SentenceDetectorDL_Healthcare.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/11.0.SentenceDetectorDL_Healthcare.ipynb)

[08.3.MedicalBertForSequenceClassification_in_SparkNLP.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/08.3.MedicalBertForSequenceClassification_in_SparkNLP.ipynb)

### ➤ Topic Based Notebooks

[05.3.Calculate_Medicare_Risk_Adjustment_Score.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/05.3.Calculate_Medicare_Risk_Adjustment_Score.ipynb)

[21.0.Oncology_Model.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/21.0.Oncology_Model.ipynb)

[22.0.Adverse_Drug_Event_ADE_NER_and_Classifier.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/22.0.Adverse_Drug_Event_ADE_NER_and_Classifier.ipynb)

[26.0.Voice_of_Patient_Models.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/22.0.Adverse_Drug_Event_ADE_NER_and_Classifier.ipynb)

[27.0.Social_Determinant_of_Health_Models.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/27.0.Social_Determinant_of_Health_Models.ipynb)


### ➤ Auxillary Notebooks

[10.0.Clinical_NER_Chunk_Merger.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/10.0.Clinical_NER_Chunk_Merger.ipynb)

[12.0.Clinical_Context_Spell_Checker.ipynb](https://colab.research.google.com/github/JohnSnowLabs/spark-nlp-workshop/blob/master/databricks/python/healthcare-nlp/12.0.Clinical_Context_Spell_Checker.ipynb)

## ☞ Biomedical & Clinical NER Models Benchmarks/ Rankings

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-anatem)](https://paperswithcode.com/sota/named-entity-recognition-on-anatem?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-bc2gm)](https://paperswithcode.com/sota/named-entity-recognition-on-bc2gm?p=biomedical-named-entity-recognition-at-scale)
 
[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-bc4chemd)](https://paperswithcode.com/sota/named-entity-recognition-on-bc4chemd?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-bionlp13-cg)](https://paperswithcode.com/sota/named-entity-recognition-on-bionlp13-cg?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-linnaeus)](https://paperswithcode.com/sota/named-entity-recognition-on-linnaeus?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-species800)](https://paperswithcode.com/sota/named-entity-recognition-on-species800?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-ner-on-jnlpba)](https://paperswithcode.com/sota/named-entity-recognition-ner-on-jnlpba?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-ner-on-ncbi-disease)](https://paperswithcode.com/sota/named-entity-recognition-ner-on-ncbi-disease?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-linnaeus)](https://paperswithcode.com/sota/named-entity-recognition-on-linnaeus?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-ner-on-ncbi-disease)](https://paperswithcode.com/sota/named-entity-recognition-ner-on-ncbi-disease?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-on-bc5cdr-chemical)](https://paperswithcode.com/sota/named-entity-recognition-on-bc5cdr-chemical?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/biomedical-named-entity-recognition-at-scale/named-entity-recognition-ner-on-bc5cdr)](https://paperswithcode.com/sota/named-entity-recognition-ner-on-bc5cdr?p=biomedical-named-entity-recognition-at-scale)

[![PWC](https://img.shields.io/endpoint.svg?url=https://paperswithcode.com/badge/improving-clinical-document-understanding-on/clinical-assertion-status-detection-on-2010)](https://paperswithcode.com/sota/clinical-assertion-status-detection-on-2010?p=improving-clinical-document-understanding-on)

Databricks Spark NLP Healthcare notebooks have been updated to latest release v5.1.0 (25.09.2023)

## Automatic deployment of John Snow Labs NLP on Databricks

Before running these notebooks in your Databricks cluster, please make sure that you setup your cluster according to instructions here:

1. In order to get trial keys for Spark NLP for Healthcare, fill in the form available at https://www.johnsnowlabs.com/databricks/ using your company e-mail and your databricks instance details. 

2. You will receive an e-mail for validating the provided e-mail address. Please click on the validation button. 

3. If you have a *Community Edition* Databricks instance, you will get a second email in a few minutes with a deployment script. Upload the script to your databricks workspace, attach it to a running cluster and run it for a frictionless installation of John Snow Labs NLP libraries. The deployment script will also install the TRIAL license key on your cluster. 

4. If you have an *Standard* or above Databricks subscriptions, John Snow Labs NLP libraries will be installed automatically on the cluster of your choice. 

You are ready to go!


## Manual deployment of John Snow Labs NLP on Databricks

1. In order to get trial keys for Spark NLP for Healthcare
, fill the form at https://www.johnsnowlabs.com/spark-nlp-try-free/ and you will get your keys to your email in a few minutes.

2. On a new cluster or existing one

  - add the following to the `Advanced Options -> Spark` tab, in `Spark.Config` box:

    ```bash
    spark.local.dir /var
    spark.kryoserializer.buffer.max 1000M
    spark.serializer org.apache.spark.serializer.KryoSerializer
    spark.driver.extraJavaOptions -Dspark.jsl.settings.pretrained.credentials.secret_access_key=xxx -Dspark.jsl.settings.pretrained.credentials.access_key_id=yyy

    ```
  - add the following to the `Advanced Options -> Spark` tab, in `Environment Variables` box:

    ```bash
    SPARK_NLP_LICENSE=zzz
    ```

3. Download the followings with AWS CLI to your local computer

    `$ aws s3 cp --region us-east-2 s3://pypi.johnsnowlabs.com/$jsl_secret/spark-nlp-jsl-3.0.2.jar spark-nlp-jsl-3.0.2.jar`

    `$ aws s3 cp --region us-east-2 s3://pypi.johnsnowlabs.com/$jsl_secret/spark-nlp-jsl/spark_nlp_jsl-3.0.2-py3-none-any.whl spark_nlp_jsl-3.0.2-py3-none-any.whl`

4. In `Libraries` tab inside your cluster:

 - Install New -> PyPI -> `spark-nlp==3.0.2` -> Install
 - Install New -> Maven -> Coordinates -> `com.johnsnowlabs.nlp:spark-nlp_2.12:3.0.2` -> Install

 - add following jars for the Healthcare library that you downloaded above:
        - Install New -> Python Whl -> upload `spark_nlp_jsl-3.0.2-py3-none-any.whl`

        - Install New -> Jar -> upload `spark-nlp-jsl-3.0.2.jar`

5. Now you can attach your notebook to the cluster and use Spark NLP!

For more information, see

  https://nlp.johnsnowlabs.com/docs/en/install#databricks-support

  https://nlp.johnsnowlabs.com/docs/en/licensed_install#install-spark-nlp-for-healthcare-on-databricks

The following notebooks are prepared and tested on **r2.2xlarge at 8.0 (includes Apache Spark 3.1.1, Scala 2.12)** on Databricks